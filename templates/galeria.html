{% extends 'base.html' %}
{% block title %}Galeria · Nosso Site{% endblock %}
{% block content %}
<h1>Galeria</h1>
<form method="post" enctype="multipart/form-data" class="upload-form">
  <input type="file" name="foto" accept="image/*,video/*" required>
  <button type="submit">Enviar</button>
  <small>Tipos: png, jpg, jpeg, gif, webp, mp4, mov, webm (máx 10MB)</small>
</form>

<div class="grid">
  {% for it in items %}
    {% if it.kind == 'image' %}
      <a class="card" href="{{ url_for('uploaded_file', filename=it.file) }}" target="_blank" rel="noopener">
        <img src="{{ url_for('uploaded_file', filename=it.thumb) }}" alt="foto" loading="lazy">
      </a>
    {% elif it.kind == 'video' %}
      <a class="card" href="{{ url_for('uploaded_file', filename=it.file) }}" target="_blank" rel="noopener">
        <div class="video-thumb">
          {% if it.thumb %}
            <img src="{{ url_for('uploaded_file', filename=it.thumb) }}" alt="thumb do vídeo" loading="lazy">
          {% else %}
            <div class="no-thumb">Vídeo</div>
          {% endif %}
          <span class="badge">▶</span>
        </div>
      </a>
    {% endif %}
  {% else %}
    <p>Nenhum arquivo ainda. Bora subir o primeiro?</p>
  {% endfor %}
</div>
{% endblock %}
